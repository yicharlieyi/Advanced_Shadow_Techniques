<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Advanced Shadow Algorithms</title>
    
    <link type="text/css" rel="stylesheet" href="rasterize.css">

    <script type="text/javascript" src="gl-matrix.js"></script>
    <script type="text/javascript" src="rasterize.js"></script>
    
  </head>

  <body onload="main();">
    <div id="mainContainer">
      <!-- WebGL Canvas -->
      <canvas id="myWebGLCanvas" width="600" height="600"></canvas>

      <!-- HUD Overlay -->
      <div id="hud">
        <p>FPS: <span id="fps">0.00</span><span id="frameTime"> / 0.00ms</span></p>
      </div>

      <!-- Shadow Controls --> 
      <div id="shadowControls">
        <h3>Shadow Settings</h3>
        
        <div class="shadow-technique-group">
          <button id="basicShadowBtn" class="shadow-technique-btn active">Basic Shadow Map</button>
          <button id="csmBtn" class="shadow-technique-btn">Cascaded Shadow Maps</button>
          <button id="pcfToggleBtn" class="shadow-technique-btn">Percentage Closer Filtering</button>
          <button id="vsmToggleBtn" class="shadow-technique-btn">Variance Shadow Maps</button>
        </div>
        
        <!-- CSM Controls (shown when CSM is enabled) -->
        <div id="csmControls" class="control-group">
          <label for="cascadeCountSlider">
            Cascade Count: <span id="cascadeCountValue" class="slider-value">3</span>
          </label>
          <input type="range" id="cascadeCountSlider" min="1" max="4" step="1" value="3">
          
          <label for="cascadeSplitSlider">
            Split Ratio: <span id="cascadeSplitValue" class="slider-value">0.5</span>
          </label>
          <input type="range" id="cascadeSplitSlider" min="0.1" max="0.9" step="0.05" value="0.5">
        </div>
        
        <!-- Shadow Map Size (always visible) -->
        <label for="shadowMapSizeSlider">
          Shadow Map Size: <span id="shadowMapSizeValue" class="slider-value">2048</span>
        </label>
        <input type="range" id="shadowMapSizeSlider" min="512" max="4096" step="256" value="2048">
        
        <!-- PCF Controls (shown when PCF is enabled) -->
        <div id="pcfControls" class="control-group">
          <label for="pcfKernelSizeSlider">
            Kernel Size: <span id="pcfKernelSizeValue" class="slider-value">3</span>
          </label>
          <input type="range" id="pcfKernelSizeSlider" min="1" max="7" step="2" value="3">
          
          <label for="pcfBiasSlider">
            Bias Scale: <span id="pcfBiasValue" class="slider-value">0.03</span>
          </label>
          <input type="range" id="pcfBiasSlider" min="0.001" max="0.1" step="0.001" value="0.03">
        </div>

        <!-- VSM Controls (shown when VSM is enabled) -->
        <div id="vsmControls" class="control-group">
          <label for="vsmMinVarianceSlider">
              Min Variance: <span id="vsmMinVarianceValue">0.005</span>
          </label>
          <input type="range" id="vsmMinVarianceSlider" min="0.0001" max="0.01" step="0.0001" value="0.001">
      </div>
        
        <!-- Light controls section -->
        <div id="lightControls" class="control-group" style="display: block;">
          <h3>Light Position</h3>
          
          <label for="lightXSlider">
            X: <span id="lightXValue" class="slider-value">0.5</span>
          </label>
          <input type="range" id="lightXSlider" min="-10" max="10" step="0.1" value="0.5">
          
          <label for="lightYSlider">
            Y: <span id="lightYValue" class="slider-value">0.55</span>
          </label>
          <input type="range" id="lightYSlider" min="-10" max="10" step="0.1" value="0.55">
          
          <label for="lightZSlider">
            Z: <span id="lightZValue" class="slider-value">-0.5</span>
          </label>
          <input type="range" id="lightZSlider" min="-10" max="10" step="0.1" value="-0.5">
        </div>
      </div>
    </div>
  </body>
</html>